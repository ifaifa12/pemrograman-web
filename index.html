<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toko Hijab By SyIfaaa</title>

    <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

     <style>
        body {
            background-color: #faf8fa;
            font-family: 'Poppins', sans-serif;
        }
        .card {
            margin-bottom: 20px;
            transition: transform 0.2s ease;
            border: none;
        }
        .card:hover {transform: scale(1.02);}
        .card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
        }
        .keranjang-container{
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0);
        }
        th {
            background-color: #27ae60;
            color: white;
            text-align: center;
        }
        footer {
            background: #f1f1f1;
            padding: 15px 0;
            text-align: center;
            color: #777;
            margin-top: 40px;
        }
        .toast-message {
            position: fixed;
            bottom: fixed;
            right: 20px;
            background-color: #28a76e;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0);
            animation: fadeInOut;
            z-index: 9999;
        }
        @keyframes fadeInOut {
            0% {opacity: 0; transform:translateY(10px) ;}
            10% {opacity: 1; transform: translateY(0);}
            90% {opacity: 1;}
            100% {opacity: 0; transform: translateY(10px);}
        }
        #struk-container {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0);
            margin-top: 30px;
        }
        #struk-container h4 {
            text-align: center;
            color: #27ae60;
            font-weight: bold;
        }
        #struk-container hr {
            border: 1px dashed #999;
        }
     </style>
</head>
<body>

    <!-- Navbar -->
     <nav class="navbar navbar-expand-lg" style="background-color: white;">
        <div class="container">
            <a class="navbar-brand fw-bold text-success" href="#">Toko Hijab By SyIfaaa</a>
        </div>
     </nav>

     <div class="container mt-4">
        <h2 class="text-center fw-bold mb-3" style="color: #27ae60;">Selamat Datang Di Toko Hijab By SyIfaaa</h2>
        <p class="text-center text-muted mb-4">Alamat Toko: Jl. Mawar No.12, Bandung - Telp: 0812-3456-7890</p>
        <hr>

        <!-- Form kasir -->
         <div class="keranjang-container mb-4">
            <h4 class="mb-3 text-success fw-semibold"> Data Kasir</h4>
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Nama Kasir</label>
                    <input type="text" id="namakasir" class="form-control" placeholder="Masukkan nama kasir">
                </div>
                <div class="col-md-4">
                    <label class="form-label">No. HP kasir</label>
                    <input type="text" id="nohpkasir" class=" form-control" placeholder="Masukkan No Hp">
                </div>
            </div>
            <button id="simpankasir" class="btn btn-success mt-3">Simpan Data Kasir</button>
            <h5 id="ucapankasir" class="mt-3 text-success fw-semibold"></h5>
         </div>

         <!-- Daftar Produk -->
          <div class="row" id="produk-list"></div>

          <!-- Keranjang -->
           <div class="keranjang-container mt-4">
            <h3>Keranjang Belanja</h3>
            <div class="table-responsive">
                <table class="table table-bordered align-middle mt-3">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Nama Produk</th>
                            <th>Harga Satuan</th>
                            <th>Jumlah</th>
                            <th>Subtotal</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="keranjang"></tbody>
                </table>
            </div>
            <h5 id="total-Produk" class="=mt-3">Total Produk: 0 item</h5>
            <h5 id="total-harga" class="mb-3">Total Harga: Rp 0</h5>

            <div id="infokasir" class="mt-3 text-muted"></div>
            <button id="checkout-btn" class="btn btn-success">Checkout</button>
           </div>

           <!-- Struk Belanja -->
            <div id="struk-container" class="keranjang-container mt-4">
                <h4> STRUK BELANJA</h4>
                <hr>
                <div id="struk-content"></div>
            </div>
           </div>
     
     <script>
        document.addEventListener("DOMContentLoaded", () => {
            const Produk = [
                { id:1, nama:"Elzatta", harga:86000, gambar:"https://tse3.mm.bing.net/th/id/OIP.ihaOiObbT_nzObtzdvLuMwHaHa?pid=Api&P=0&h=180"},
                { id:2, nama:"Zoya", harga:79000, gambar:"https://tse1.mm.bing.net/th/id/OIP.XLoiGZA-W2O6f42SfhtyDQHaHa?pid=Api&P=0&h=180"},
                { id:3, nama:"Rabbani", harga:85000, gambar:"https://tse1.mm.bing.net/th/id/OIP.sR4GD7pstLvtdJ4D2zt9ZgAAAA?pid=Api&P=0&h=180"},
                { id:4, nama:"Ethica", harga:90000, gambar:"https://down-id.img.susercontent.com/file/sg-11134201-7rdxs-lxljrzh0scpy2b"},
                { id:5, nama:"Dauky", harga:15800, gambar:"https://tse2.mm.bing.net/th/id/OIP.xMUEeBpD7gdvPNSSpjgEjwHaHa?pid=Api&P=0&h=180"},
                { id:6, nama:"Lozy", harga:93000, gambar:"https://down-id.img.susercontent.com/file/id-11134207-7r98s-lsusnb5owosda4"},
            ];

            const keranjang = [];
            const produkList = document.getElementById("produk-list");
            const keranjangList = document.getElementById("keranjang");
            const totalHargaElem = document.getElementById("total-harga");
            const totalProdukElem = document.getElementById("total-produk");
            const checkoutBtn = document.getElementById("checkout-btn");
            const simpanKasirBtn = document.getElementById("simpankasir");
            const ucapanKasir = document.getElementById("ucapankasir");
            const infoKasir = document.getElementById("infokasir");
            const strukContainer = document.getElementById("struk-container");
            const strukContent = document.getElementById("struk-content");
            const formatRp = n => new Intl.NumberFormat('id-ID').format(n);

            let kasirData = { nama: "", nohp: ""};

            // Render Produk
            Produk.forEach(p => {
                const col = document.createElement("div");
                col.className = "col-md-4";
                col.innerHTML = `
                  <div class="card p-2 shadow-sm">
                    <img src="${p.gambar}" alt="${p.nama}">
                    <div class="card-body">
                        <h5 class="card-title">${p.nama}</h5>
                        <p>Harga: Rp ${formatRp(p.harga)}</p>
                        <input type="number" id="qty-${p.id}" min="1" value="1" class="form-control mb-2">
                        <button class="btn btn-success w-100 mb-2" data-id="${p.id}">Tambah Ke Keranjang</button>
                        <div id="mini-keranjang-${p.id}" class="mini-keranjang fw-semibold"></div>
                    </div>
                  </div>`;
                  produkList.appendChild(col);
             });

             simpanKasirBtn.addEventListener("click", () => {
                const nama = document.getElementById("namakasir").value.trim();
                const nohp = document.getElementById("nohpkasir").value.trim();

                if (!nama || !nohp){
                    showToast("Lengkapi semua data kasir!");
                    return;
                }

                kasirData = { nama, nohp};
                ucapanKasir.textContent = `Selamat berbelanja, ${nama}! semoga harimu menyenangkan`;
                infoKasir.innerHTML = `<b>Kasir:</b> ${nama} | <b>No HP:</b> ${nohp}`;
                showToast("Data kasir disimpan!");
             });

             produkList.addEventListener("click", (e) => {
                const btn = e.target.closest("button[data-id]");
                if (!btn) return;
                tambahkekeranjang(Number(btn.dataset.id));
             });

             function showToast(pesan) {
                const toast = document.createElement("div");
                toast.className = "toast-message";
                toast.textContent = pesan;
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 2000);
             }

             function tambahkekeranjang(id) {
                const p = Produk.find(x => x.id === id);
                const qty = parseInt(document.getElementById(`qty-${id}`).value) || 1;
                const existing = keranjang.find(i => i.id === id);
                if (existing) existing.jumlah += qty;
                else keranjang.push({...p, jumlah: qty});
                tampilkankeranjang();
                document.getElementById(`qty-${id}`).value = 1;
                document.getElementById(`mini-keranjang-${id}`).textContent=
                  `Di keranjang: ${keranjang.find(i => i.id === id).jumlah}x ${p.nama}`;
                showToast(`${p.nama} ditambnahkan ke keranjang!`);
             }

             function tampilkankeranjang() {
                keranjangList.innerHTML = "";
                let totalHarga = 0, totalProduk = 0;
                keranjang.forEach((item, i) => {
                    const subtotal = item.harga * item.jumlah;
                    totalHarga += subtotal;
                    totalProduk += item.jumlah;
                    keranjangList.innerHTML +=`
                       <tr>
                        <td>${i + 1}</td>
                        <td>${item.nama}</td>
                        <td>Rp ${formatRp(item.harga)}</td>
                        <td>${item.jumlah}</td>
                        <td>Rp ${formatRp(subtotal)}</td>
                        <td><button class="btn btn-danger btn-sm" data-remove="${item.id}">Hapus</button></td>
                        </try>`;
                     });
                     totalHargaElem.textContent ="Total Harga: Rp " + formatRp(totalHarga);
                     totalProdukElem.textContent = "Total Produk: " + totalProduk + " item";
                  }

                  keranjangList.addEventListener("click", (e) => {
                    const btn = e.target.closest("button[data-remove]");
                    if (!btn) return;
                    const id = Number(btn.dataset.remove);
                    const idx = keranjang.findIndex(i => i.id === id);
                    if (idx !== -1) keranjang.splice(idx, 1);
                    tampilkankeranjang();
                    showToast("Produk dihapus dari keranjang");
                 });

                 checkoutBtn.addEventListener("click", () => {
                    if (keranjang.length === 0) return showToast("keranjang masih kosong!");
                    if (!kasirData.nama) return showToast("Isi data kasir dulu");

                    let totalHarga = 0;
                    let totalProduk = 0;
                    let listBelanja = "";
                
                keranjang.forEach((item, i) => {
                    const subtotal = item.harga * item.jumlah;
                    totalHarga += subtotal;
                    totalProduk += item.jumlah;
                    listBelanja += `
                    <tr>
                        <td>${i + 1}</td>
                        <td>${item.nama}</td>
                        <td>${item.jumlah}</td>
                        <td> ${formatRp(item.harga)}</td>
                        <td> ${formatRp(subtotal)}<.td>
                    </tr>`;
                });

                const waktu = new Date().toLocaleDateString('id-ID');

                strukContent.innerHTML = `
                <p class="text-center fw-semibold">Toko Hijab By SyIfaa</p>
                <p class="text-center small">Jl. Mawar No.12, Bandung - Telp:0812-3456-7890</p>
                <hr>
                <p><b>kasir:</b> ${kasirData.nama}</br>
                    <b>No HP:</b> ${kasirData. nohp}</br>
                    <b>Tanggal:</b> ${waktu}</p>
                    <table class="table table-bordered">
                        <thead><tr><th>No</th><th>Produk</th><th>Qty</th><th>Harga</th><th>Subtotal</th><th></tr></thead>
                        <tbody>${listBelanja}</tbody>
                    </table>
                    <h5>Total Produk: ${totalProduk} item</h5>
                    <h5>Total Harga: Rp ${formatRp(totalHarga)}</h5>
                    <p class="text-center mt-3 fw-semibold">Terima kasih sudah berbelanja</p>
                    `;

                    strukContainer.style.display = "block";
                    showToast("checkout berhasil! Struck ditampilkan.");
                    keranjang.length = 0;
                    tampilkanKeranjang();
                 });
              });
            </script>

            <!-- Bootstrap JS -->
             <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        </body>
        </html>
